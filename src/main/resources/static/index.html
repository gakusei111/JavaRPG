<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Java RPG Web Edition</title>
<style>
        /* 全体の背景を「冒険っぽい」色に */
        body { 
            background-color: #202028; 
            color: #fff; 
            font-family: 'Courier New', sans-serif; /* 等幅フォントでレトロ感 */
            text-align: center; 
        }

        /* ログウィンドウを「RPGのメッセージ枠」風に */
        #log-window { 
            background: #000; 
            border: 4px double #fff; /* 二重線で高級感 */
            border-radius: 8px;      /* 角を丸く */
            width: 80%; 
            max-width: 600px;        /* 広がりすぎないように */
            height: 300px; 
            margin: 20px auto; 
            overflow-y: scroll; 
            padding: 20px; 
            text-align: left;
            font-size: 16px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.2); /* ほんのり光らせる */
        }

        /* 1行ごとの演出 */
        .log-entry { 
            margin-bottom: 8px; 
            border-bottom: 1px dashed #444; 
            padding-bottom: 4px; 
            animation: fadeIn 0.5s ease-in; /* ふわっと表示させるアニメーション */
        }

        /* ボタンのデザイン */
        button { 
            background-color: #8b0000; /* 暗めの赤 */
            color: white; 
            border: 2px solid #ff4500; 
            padding: 10px 30px; 
            font-size: 18px; 
            font-weight: bold;
            cursor: pointer; 
            transition: 0.3s;
        }
        button:hover {
            background-color: #ff4500; /* マウスを乗せると明るくなる */
        }

        /* アニメーションの定義 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <h1>⚔️ Java RPG Battle ⚔️</h1>
    
    <div>
        <input type="text" id="playerName" placeholder="勇者の名前を入力" value="勇者">
        <button onclick="startBattle()">冒険に出る！</button>
    </div>

    <div id="log-window">
        <div class="log-entry">冒険の準備が整いました。</div>
    </div>

    <script>
        async function startBattle() {
            const name = document.getElementById('playerName').value;
            const logWindow = document.getElementById('log-window');
            logWindow.innerHTML = "戦闘開始中...";

            try {
                // JavaのAPIを叩く（注文を出す）
                const response = await fetch(`/api/battle?name=${name}`);
                const logs = await response.json(); // JSONとして受け取る

                // 画面をリセットしてログを表示
                logWindow.innerHTML = "";
                logs.forEach(log => {
                    const div = document.createElement('div');
                    div.className = 'log-entry';
                    div.innerText = log; // 文字列リストの場合
                    logWindow.appendChild(div);
                });
            } catch (error) {
                logWindow.innerHTML = "エラーが発生しました: " + error;
            }
        }
    </script>
</body>
</html>